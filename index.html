<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Dino Jump Game</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
    body {
        margin: 0;
        background: #f7f7f7;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        font-family: Arial, sans-serif;
    }
    canvas {
        background: #fff;
        border: 3px solid #000;
    }
    .overlay {
        position: absolute;
        text-align: center;
    }
    button {
        padding: 12px 30px;
        font-size: 18px;
        cursor: pointer;
    }
</style>
</head>
<body>

<div class="overlay" id="menu">
    <h1>DINO JUMP ðŸ¦–</h1>
    <button onclick="startCountdown()">START</button>
</div>

<canvas id="game" width="600" height="200"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const menu = document.getElementById("menu");

let dino, cactus;
let gravity = 0.6;
let speed = 6;
let score = 0;
let playing = false;
let countdown = 3;

function resetGame() {
    dino = { x: 50, y: 150, w: 30, h: 30, v: 0, jump: false };
    cactus = { x: canvas.width, y: 150, w: 20, h: 40 };
    score = 0;
    speed = 6;
}

resetGame();

document.addEventListener("keydown", e => {
    if (e.code === "Space" && playing && !dino.jump) {
        jump();
    }
});

canvas.addEventListener("click", () => {
    if (playing && !dino.jump) jump();
});

function jump() {
    dino.v = -11;
    dino.jump = true;
}

function startCountdown() {
    menu.innerHTML = `<h1>${countdown}</h1>`;
    const timer = setInterval(() => {
        countdown--;
        if (countdown > 0) {
            menu.innerHTML = `<h1>${countdown}</h1>`;
        } else {
            clearInterval(timer);
            menu.style.display = "none";
            countdown = 3;
            playing = true;
            resetGame();
            update();
        }
    }, 1000);
}

function drawGround() {
    ctx.fillStyle = "#000";
    ctx.fillRect(0, 180, canvas.width, 2);
}

function drawDino() {
    ctx.fillStyle = "#000";
    ctx.fillRect(dino.x, dino.y, dino.w, dino.h);
}

function drawCactus() {
    ctx.fillStyle = "green";
    ctx.fillRect(cactus.x, cactus.y, cactus.w, cactus.h);
}

function drawScore() {
    ctx.font = "16px Arial";
    ctx.fillText("Score: " + score, 10, 20);
}

function gameOver() {
    playing = false;
    menu.style.display = "block";
    menu.innerHTML = `
        <h1>GAME OVER</h1>
        <p>Score: ${score}</p>
        <button onclick="startCountdown()">RESTART</button>
    `;
}

function update() {
    if (!playing) return;

    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Dino physics
    dino.v += gravity;
    dino.y += dino.v;
    if (dino.y >= 150) {
        dino.y = 150;
        dino.v = 0;
        dino.jump = false;
    }

    // Cactus move
    cactus.x -= speed;
    if (cactus.x < -cactus.w) {
        cactus.x = canvas.width + Math.random() * 200;
        score++;
        if (score % 5 === 0) speed += 0.5; // tÄƒng Ä‘á»™ khÃ³
    }

    // Collision
    if (
        dino.x < cactus.x + cactus.w &&
        dino.x + dino.w > cactus.x &&
        dino.y < cactus.y + cactus.h &&
        dino.y + dino.h > cactus.y
    ) {
        gameOver();
        return;
    }

    drawGround();
    drawDino();
    drawCactus();
    drawScore();

    requestAnimationFrame(update);
}
</script>

</body>
</html>
