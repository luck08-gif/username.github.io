<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Dino Game</title>
  <style>
    body {
      background: #222;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
      color: white;
      font-family: Arial;
    }
    canvas {
      background: #333;
      border: 2px solid #fff;
    }
  </style>
</head>
<body>

<canvas id="game" width="800" height="300"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

// ===== LOAD ẢNH =====
const dinoImg = new Image();
dinoImg.src = "game1.jpg";

const obsImg = new Image();
obsImg.src = "obstacle.png";

// ===== KHỦNG LONG =====
let dino = {
  x: 50,
  y: 200,
  w: 50,
  h: 50,
  vy: 0,
  jump: false
};

const gravity = 0.8;

// ===== CHƯỚNG NGẠI =====
let obstacles = [];
let speed = 4;
let frame = 0;

// ===== ĐIỀU KHIỂN =====
document.addEventListener("keydown", e => {
  if (e.code === "Space" && !dino.jump) {
    dino.vy = -15;
    dino.jump = true;
  }
});

function update() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // ---- DINO ----
  dino.y += dino.vy;
  dino.vy += gravity;

  if (dino.y >= 200) {
    dino.y = 200;
    dino.jump = false;
  }

  ctx.drawImage(dinoImg, dino.x, dino.y, dino.w, dino.h);

  // ---- OBSTACLES ----
  if (frame % 120 === 0) {
    obstacles.push({
      x: canvas.width,
      y: 210,
      w: 40,
      h: 40
    });
  }

  obstacles.forEach((o, i) => {
    o.x -= speed;
    ctx.drawImage(obsImg, o.x, o.y, o.w, o.h);

    // va chạm
    if (
      dino.x < o.x + o.w &&
      dino.x + dino.w > o.x &&
      dino.y < o.y + o.h &&
      dino.y + dino.h > o.y
    ) {
      alert("GAME OVER");
      location.reload();
    }

    if (o.x + o.w < 0) obstacles.splice(i, 1);
  });

  // tăng độ khó
  if (frame % 600 === 0) speed += 0.5;

  frame++;
  requestAnimationFrame(update);
}

// đợi ảnh load xong
dinoImg.onload = () => update();
</script>

</body>
</html>
